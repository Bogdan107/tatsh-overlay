# kate: replace-tabs false; hl bash
shopt -s extglob

_closure_compiler() {
	local cur prev opts
	COMPREPLY=()
	cur="${COMP_WORDS[COMP_CWORD]}"
	prev="${COMP_WORDS[COMP_CWORD-1]}"
	opts="--accept_const_keyword
		--charset
		--closure_entry_point
		--common_js_entry_module
		--common_js_module_path_prefix
		--compilation_level
		--create_name_map_files
		--create_source_map
		--debug
		--define
		--D
		-D
		--externs
		--flagfile
		--formatting
		--generate_exports
		--help
		--js
		--js_output_file
		--jscomp_error
		--jscomp_off
		--jscomp_warning
		--language_in
		--logging_level
		--manage_closure_dependencies
		--module
		--module_output_path_prefix
		--module_wrapper
		--only_closure_dependencies
		--output_manifest
		--output_wrapper
		--print_ast
		--print_pass_graph
		--print_tree
		--process_closure_primitives
		--process_common_js_modules
		--process_jquery_primitives
		--property_map_input_file
		--property_map_output_file
		--source_map_format
		--summary_detail_level
		--third_party
		--transform_amd_modules
		--translations_file
		--translations_project
		--use_only_custom_externs
		--variable_map_input_file
		--variable_map_output_file
		--version
		--warning_level
	"

	case "${prev}" in
		--charset)
			local charsets="$(cat /usr/share/closure-compiler/charsets.txt)"
			COMPREPLY=( $(compgen -W "${charsets}" -- ${cur}) )
			return 0
			;;
		
		--compilation_level)
			local levels="WHITESPACE_ONLY
				SIMPLE_OPTIMIZATIONS
				ADVANCED_OPTIMIZATIONS"
			COMPREPLY=( $(compgen -W "${levels}" -- ${cur}) )
			return 0
		;;
		
		--formatting)
			local options="PRETTY_PRINT
				PRINT_INPUT_DELIMITER"
			COMPREPLY=( $(compgen -W "${options}" -- ${cur}) )
			return 0
		;;
		
		--language_in)
			local options="ECMASCRIPT3
				ECMASCRIPT5
				ECMASCRIPT5_STRICT"
			COMPREPLY=( $(compgen -W "${options}" -- ${cur}) )
			return 0
		;;
		
		--logging_level)
			# http://docs.oracle.com/javase/1.4.2/docs/api/java/util/logging/Level.html
			local options="SEVERE
				WARNING
				INFO
				CONFIG
				FINE
				FINER
				FINEST"
			COMPREPLY=( $(compgen -W "${options}" -- ${cur}) )
			return 0
		;;
		
		--source_map_format)
			local options="V1 DEFAULT V2 V3"
			COMPREPLY=( $(compgen -W "${options}" -- ${cur}) )
			return 0
		;;
		
		--summary_detail_level)
			local options="0 1 2 3"
			COMPREPLY=( $(compgen -W "${options}" -- ${cur}) )
			return 0
		;;
		
		--warning_level)
			local options="QUIET DEFAULT VERBOSE"
			COMPREPLY=( $(compgen -W "${options}" -- ${cur}) )
			return 0
		;;
		
		*)
		;;
	esac

	if [[ ${cur} == -* ]]; then
		COMPREPLY=( $(compgen -W "${opts}" -- ${cur}) )
	fi
	
	return 0
}
complete -F _closure_compiler -o default closure-compiler
